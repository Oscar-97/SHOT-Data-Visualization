(()=>{"use strict";function e(e){let t=e.split("|").filter((e=>e));for(var l=t.length-1;l>=0;l--)t[l]=t[l].replace(/\s+/g,"");return t.slice(0,-1)}function t(e){let t=e.split(" "),l=t.filter((e=>e));return t=l.map((function(e){return e.replace(/[|]/g,"")})),t.slice(0,-1)}document.getElementById("fileInput").value="";const l=document.getElementById("fileInput"),n=document.getElementById("importDataButton"),o=document.getElementById("selectAllButton"),a=document.getElementById("viewSelectionButton"),c=[];function s(){let e=document.getElementsByTagName("input"),t=[];for(let l of e)l.checked&&t.push(l.id);return console.log(t),t}function d(e,t){const l=[];for(let n=0;n<t.length;n++)e.includes(t[n])?l[n]="Used":l[n]="NotUsed";return console.log(l),l}n.addEventListener("click",(function(){try{document.querySelectorAll(".form-check").forEach((e=>{e.remove()})),document.getElementById("tableSearch").remove()}catch{}o.disabled=!1,"Report"==document.title?a.disabled=!1:"Plots"==document.title&&(viewPlotsButton.disabled=!1),n.disabled=!0,function(){const l=c,n=e(l[0]).shift(),r=e(l[0]).slice(1),i=function(e){let t=e.split(" "),l=t.filter((function(e){return"bound"!=e})).map((function(e){return e.replace(/[I| #]/g,"")})).filter((e=>e));for(var n=0;n<l.length;n++)"Primal"===l[n]?l[n]="Primal bound":"Dual"===l[n]?l[n]="Dual bound":"Nodes"===l[n]&&(l[n]="Nodes I");return t=l,t.slice(0,-1)}(l[1]),u=i.splice(0,7),m=t(l[3]);let h=3;const f=[];for(var g=h;g<l.length;g++)f.push(t(l[g])[0]);const p=[];for(;h<l.length;h++)p.push(t(l[h]).slice(1));console.log("Total number of rows in the data file: \n"+l.length),console.log("Solvers: \n",r),console.log("Number of filtered data labels: ",i.length),console.log("Data labels: \n",i),console.log("Instance categories: \n",u),console.log("Filtered results for problem: \n",m[0],"results: ",m.slice(1)),function(e){for(var t=0;t<e.length;t++){const l=document.createElement("div");l.className="form-check form-check-inline";const n=document.createElement("label");n.className="form-check-label",n.innerText=e[t];const o=document.createElement("input");o.className="form-check-input",o.type="checkbox",o.id=e[t],l.appendChild(o),l.appendChild(n),document.getElementById("tableFilters").appendChild(l)}}(r),o.addEventListener("click",(function(){let e=document.getElementsByTagName("input");for(let t of e)t.checked||"fileInput"==t.id||t.click();o.disabled=!0})),"Report"==document.title&&a.addEventListener("click",(function(){let e=s(),t=d(e,r);!function(e,t,l,n,o,a,c){let s,d;console.log("NewDataLabels length: ",d),console.log("NewResultsData length: ",s),d=[],c.forEach(((e,t)=>{if("Used"===e){const e=8*t,l=8*t+8;let o=[];o=n.slice(e,l),o.forEach((e=>{d.push(e)}))}}));const r=[0,1,2,3,4,5];c.forEach(((e,t)=>{const l=8*t+14;if("Used"===e)for(let e=8*t+6;e<l;e++)r.push(e)})),console.log("Columns to use: ",r),s=a.map((e=>r.map((t=>e[t])))),console.log("NewResultsData after modifications: ",s);const i=document.getElementById("dataTable");i.innerHTML="";let u="<thead class='thead-dark' <tr><th colspan='7'>"+e+"</th>";for(let e=0;e<t.length;e++)u+="<th colspan='8'>"+t[e]+"</th>";u+="</tr></thead>";let m="<thead class='thead-dark' id='datalabelsThead'><tr>";for(let e=0;e<l.length;e++)m+="<th scope='col'>"+l[e]+"</th>";for(let e=0;e<d.length;e++)m+="<th>"+d[e]+"</th>";m+="</tr></thead>";let h="<tbody>";console.log("Problems length: ",o.length);for(let e=0;e<o.length;e++){let t="";s[e].forEach((e=>{t+="<td>"+e+"</td>"})),h+="<tr><th scope='row'>"+o[e]+"</th>"+t+"</tr>"}h+="</tbody>";const f=document.createElement("table");f.className="table table-bordered table-sm",f.id="dataTableGenerated",f.innerHTML=u+m+h,i.appendChild(f);const g=document.getElementById("tableSearch");if(!document.body.contains(g)){const e=document.createElement("input");e.id="tableSearch",e.type="text",e.className="form-control",e.placeholder="Search for a problem...",document.getElementById("tableFilters").appendChild(e)}}(n,e,u,i,f,p,t),o.disabled=!1;const l=document.getElementById("tableSearch");l.value="",l.oninput=()=>{!function(){const e=document.getElementById("tableSearch").value.toUpperCase(),t=document.getElementById("dataTableGenerated").getElementsByTagName("tr");let l,n;for(let o=2;o<t.length;o++){l=t[o].getElementsByTagName("th");for(let t=0;t<l.length;t++)l[t].innerHTML.toUpperCase().indexOf(e)>-1&&(n=!0);n?(t[o].style.display="",n=!1):t[o].style.display="none"}}()}})),"Plots"==document.title&&document.getElementById("viewPlotsButton").addEventListener("click",(function(){let e=d(s(),r);console.log("Sending to CreateChart."),function(e,t,l){function n(e){let l=[],n=[],o=8*e+10;for(var a=0;a<t.length;a++)l.push(t[a][o]);for(a=0;a<t.length;a++)n.push({x:l[a],y:a});return n}const o=[];for(let t=0;t<e.length;t++)console.log("Status: ",l[t]),"Used"===l[t]&&(console.log("Creating dataset for: ",e[t]),o.push({label:e[t],data:n(t),backgroundColor:"#"+Math.floor(16777215*Math.random()).toString(16)}));console.log("Dataset content: ",o);const a={datasets:o},c=document.getElementById("dataChart"),s=new Chart(c,{type:"scatter",data:a,options:{plugins:{title:{display:!0,text:"Absolute performance profile (PrimalGap)"}},scales:{x:{title:{display:!0,text:"PrimalGap"}},y:{title:{display:!0,text:"Number of instances."}}}}});document.getElementById("viewPlotsButton").addEventListener("click",(function(){s.destroy()}))}(r,p,e),o.disabled=!1}))}()})),l.addEventListener("change",(function(){n.disabled=!1;let e=new FileReader;e.addEventListener("load",(function(){c.length=0;let t=e.result.split("\n");for(let e=0;e<t.length;e++){let l=t[e];c.push(l)}})),e.readAsText(l.files[0])}))})();